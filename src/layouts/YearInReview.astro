---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';

type Props = {
	title: string;
	description: string;
	pubDate: Date;
	updatedDate?: Date;
	heroImage?: string;
};

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en" class="year-in-review-page">
	<head>
		<BaseHead title={title} description={description} />
		<link href="https://fonts.googleapis.com/css2?family=Jacquard+24&family=Martian+Mono:wght@100..800&display=swap" rel="stylesheet">
		<style is:global>
			/* Custom styles for year-in-review post - scoped to .year-in-review-page */

			.year-in-review-page {
				--yir25-background: #f7dbe9;
				--yir250-text: #3a282d;
				--yir25-text-light: #66545a;
				--yir25-accent: #edbbd6;
				--yir25-font: 'Jacquard 24', serif;
				--yir25-mono-font: 'Martian Mono', monospace;
				interpolate-size: allow-keywords;
			}
			
			.year-in-review-page body {
				background: var(--yir25-background);
			}

			.year-in-review-page .static-bg {
				display: none;
			}
			
			.year-in-review-page h1, 
			.year-in-review-page h2, 
			.year-in-review-page h3, 
			.year-in-review-page h4, 
			.year-in-review-page h5, 
			.year-in-review-page h6 {
				font-family: var(--yir25-font);
				font-weight: 400;
				color: var(--yir25-text);
			}

			.year-in-review-page .year-in-review {
				width: 100%;
				padding: 2rem 0;
			}
			
			.year-in-review-page .year-in-review-header {
				display: flex;
				align-items: center;
				justify-content: flex-start;
				gap: 1rem;
				padding: 0 5vw;
			}
			
			.year-in-review-page .year-in-review-tag {
				display: block;
				background: var(--yir25-accent);
				color: var(--yir25-text);
				font-family: var(--yir25-mono-font);
				font-size: 0.8rem;
				font-weight: 500;
				text-transform: uppercase;
				padding: 0.5rem 1rem;
				border-radius: 1.5rem;
			}
			
			.year-in-review-page .year-in-review-date {
				display: block;
				background: var(--yir25-accent);
				color: var(--yir25-text);
				font-family: var(--yir25-mono-font);
				font-size: 0.8rem;
				font-weight: 500;
				text-transform: uppercase;
				padding: 0.5rem 1rem;
				border-radius: 1.5rem;
			}
			
			.year-in-review-page .year-in-review-content {
				font-size: 1.25rem;
				line-height: 1.8;
				color: var(--black);
				margin: 3rem auto;
				width: 100%;
			}

			.year-in-review-page .year-in-review-content h1,
			.year-in-review-page .year-in-review-content h2,
			.year-in-review-page .year-in-review-content h3,
			.year-in-review-page .year-in-review-content h4,
			.year-in-review-page .year-in-review-content h5,
			.year-in-review-page .year-in-review-content h6 {
				text-shadow: -5px 5px 0 var(--yir25-accent);
				line-height: 0.6;
			}

			.year-in-review-page .year-in-review-content h2 {
				font-size: clamp(5rem, 0.75rem + 10vw, 7.5rem);
				margin: 5rem 0;
				padding-left: 5%;
			}

			@media (max-width: 768px) {
				.year-in-review-page .year-in-review-content h2 {
					margin: 3rem 0;
				}
			}

			.year-in-review-page .year-in-review-content h3 {
				font-size: clamp(2rem, 0.75rem + 10vw, 5.5rem);
				margin: 3rem 0;
				padding-left: 5%;
			}

			.year-in-review-page .year-in-review-content p {
				max-width: 43rem;
				margin-left: 10%;
			}

			@media (max-width: 768px) {
				.year-in-review-page .year-in-review-content p {
					margin-left: 0;
					padding: 0 5%;
				}
			}

			.year-in-review-page .yir25--masthead-title {
				padding: 0 5vw;
			}

			.year-in-review-page .yir25--masthead-title h1 {
				font-size: clamp(3rem, 0.75rem + 20vw, 16rem);
				line-height: 0.6;
				max-width: 100%;
				position: relative;
				color: var(--yir25-text);
				text-shadow: -5px 5px 0 var(--yir25-accent);
			}

			.year-in-review-page .yir25--masthead-title p {
				font-size: clamp(1rem, 0.75rem + 10vw, 1.75rem);
				line-height: 1.1;
				font-style: italic;
				margin: 5rem 0 5rem 20%;
			}

			.year-in-review-page .yir25-intro-image {
				width: 50%;
				position: absolute;
				z-index: -1;
				left: 0;
				top: 40%;
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25-intro-image {
					width: 100%;
					position: relative;
					z-index: 1;
					left: 0;
					margin-left: -10%;
					top: 0;
				}
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25--masthead-title p {
					margin: 3rem 0;
				}
			}

			.year-in-review-page .yir25--intro {
				font-size: clamp(1rem, 0.75rem + 8vw, 1.75rem);
				max-width: 43rem;
				line-height: 1.4;
				margin: 0 auto 5rem 20%;
				max-width: 1600px;
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25--intro {
					margin: 0 5vw 3rem;
				}
			}

			.year-in-review-page .yir25--list {
				background-image: url('/images/yir25-halftone-pattern.png');
				background-size: 5px 5px;
				background-repeat: repeat;
				padding-bottom: 5rem;
				margin: 5rem 0;
			}

			.year-in-review-page .yir25--list h3 {
				transform: translateY(-50%);
				margin: 0;
				margin-bottom: 3rem;
			}

			.year-in-review-page .yir25--list ol {
				margin-block-start: 0;
				padding-inline-start: 0;
				position: relative;	
				max-width: 70rem;	
				padding-right: 5%;	
				padding-left: 15%;
				list-style-type: none;
			}

			.year-in-review-page .yir25--list ol li {
				position: relative;
				counter-increment: film-counter;
				padding-left: 3rem;
			}

			.year-in-review-page .yir25--list ol li::before {
				content: counter(film-counter) ".";
				position: absolute;
				left: 0;
				top: 0;
				font-size: clamp(1.25rem, 0.75rem + 5vw, 5rem);
				font-weight: 900;
				color: var(--yir25-accent);
				line-height: 0.6;
			}

			.year-in-review-page .yir25--list--hm {
				background-color: var(--yir25-background);
				box-shadow: -10px 10px 0 var(--yir25-accent);
				border-radius: 0.5rem;
				max-width: 40rem;
				padding: 2rem;
				margin-left: 20%;
				margin-bottom: 8rem;
			}

			.year-in-review-page .yir25--list--hm strong {
				color: var(--yir25-text-light);
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25--list--hm {
					margin: 4rem auto;
					max-width: 90%;
					padding: 1rem;
					font-size: 1rem;
				}
			}

			.year-in-review-page .yir25--list ol li {
				margin-bottom: 3rem;
				max-width: 29rem;
			}

			.year-in-review-page .yir25--list ol li:nth-of-type(2n) {
				margin-left: auto;
				margin-right: 0;
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25--list ol li:nth-of-type(2n) {
					margin-left: 0;
					margin-right: auto;
				}
			}

			.year-in-review-page .yir25--list ol li p {
				margin-bottom: 0;
				margin-left: 2rem;
				font-size: 1rem;
				line-height: 1.4;
				text-align: justify;
			}

			.year-in-review-page .yir25--list ol li p:first-of-type {
				font-size: clamp(1rem, 0.75rem + 5vw, 1.5rem);
				line-height: 1;
				font-family: var(--yir25-mono-font);
			}

			.year-in-review-page .yir25--list--left {
				flex: 1;
			}
			
			.year-in-review-page .yir25-list-image {
				display: block;
				float: left;
				margin-right: 2rem;
				margin-bottom: 2rem;
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25-list-image {
					float: none;
					max-width: 100%;
					margin-right: 1rem;
					margin-bottom: 1rem;
				}
			}

			.year-in-review-page .yir25-list-image-album {
				max-width: 150px;
			}

			.year-in-review-page .yir25-list-image-book {
				max-width: 200px;
			}

			.year-in-review-page .yir25--list--films ol,
			.year-in-review-page .yir25--list--books ol {
				padding: 0;
				max-width: 1000px;
				display: flex;
				flex-wrap: wrap;
				justify-content: center;
				gap: 3rem;
				margin: 3rem auto;
			}

			.year-in-review-page .yir25--list--films ol li,
			.year-in-review-page .yir25--list--books ol li {
				margin: 0;
				max-width: inherit;
				flex-basis: 250px;
			}

			.year-in-review-page .yir25--list--films ol li:nth-of-type(2n),
			.year-in-review-page .yir25--list--books ol li:nth-of-type(2n) {
				margin: 0;
			}

			.year-in-review-page .yir25--list--films ol li p,
			.year-in-review-page .yir25--list--books ol li p {
				margin-left: 0;
				max-width: 250px;
			}

			.year-in-review-page .yir25--list--films ol li p strong,
			.year-in-review-page .yir25--list--books ol li p strong {
				display: block;
			}

			.year-in-review-page .yir25-list-image-film {
				max-width: 200px;
				float: none;
				vertical-align: top;
			}

			.year-in-review-page .yir25--list-stacked {
				display: flex;
				margin: 3rem auto;
				gap: 2rem;
				justify-content: center;
				margin: 8rem 0;
				margin-bottom: 0;
				padding: 0 5% 8rem;
			}

			.year-in-review-page .yir25--list-stacked .yir25--stack {
				flex-basis: 40%;
				max-width: 600px;
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25--list-stacked {
					flex-direction: column;
					align-items: center;
					gap: 4rem;
				}
			}

			.year-in-review-page .yir25--list-stacked + .yir25--list {
				margin-top: 0;
			}

			.year-in-review-page .yir25--list details {
				font-size: clamp(1rem, 0.75rem + 5vw, 1.25rem);
				display: block;
				font-family: var(--yir25-mono-font);
			}

			.year-in-review-page .yir25--list details summary {
				transition: all 0.3s ease;
				position: relative;
				anchor-name: --summary;
			}

			.year-in-review-page .yir25--list details summary::marker {
				color: var(--yir25-accent);
				margin-left: 1rem;
				transition: all 0.3s ease;
			}

			.year-in-review-page .yir25--list details::details-content {
				transition: height 0.5s ease, content-visibility 1.5s ease allow-discrete;
				height: 0;
				overflow: clip;
				font-size: 1.25rem;
				margin-bottom: 1rem;
				font-family: 'Alegreya Sans', sans-serif;
			}

			.year-in-review-page .yir25--list details[open]::details-content {
				height: auto;
			}

			.year-in-review-page .yir25-insandouts {
				display: flex;
				gap: 2rem;
				justify-content: center;
				margin: 8rem 0;
				margin-bottom: 0;
				padding: 0 5% 8rem;
				position: relative;
			}

			@media (max-width: 768px) {
				.year-in-review-page .yir25-insandouts {
					flex-direction: column;
				}
			}

			.year-in-review-page .yir25-insandouts-list {
				flex-basis: 33rem;
				font-size: clamp(1rem, 0.75rem + 5vw, 1.25rem);
				font-weight: 500;
				font-family: var(--yir25-mono-font);
			}

			.year-in-review-page .yir25-insandouts-image {
				width: 50%;
				height: auto;
				object-fit: cover;
				position: absolute;
				left: 0;
				top: -15rem;
				z-index: -1;
			}

			.year-in-review-page .bye {
				font-size: clamp(2rem, 0.75rem + 5vw, 3.5rem);
				max-width: 1200px;
				margin: 18rem auto;
				text-align: center;
				font-family: var(--yir25-mono-font);
				font-weight: 500;
				color: var(--yir25-text-light);
				text-shadow: -5px 5px 0 var(--yir25-accent);
				line-height: 0.6;
				padding: 0 5%;
			}
			/* Add any additional custom styles below */
		</style>
	</head>

	<body>
		<Header />
		<main>
			<article class="year-in-review">
				<header class="year-in-review-header">
					<p class="year-in-review-tag">{title}</p>
					<div class="year-in-review-date">
						<FormattedDate date={pubDate} />
						{updatedDate && (
							<div class="year-in-review-updated-date">
								Last updated on <FormattedDate date={updatedDate} />
							</div>
						)}
					</div>
				</header>
				<div class="year-in-review-content">
					<slot />
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>


